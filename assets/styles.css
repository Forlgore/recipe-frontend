:root{
  --bg:#0b0f14;
  --panel:#121823;
  --muted:#9fb0c0;
  --text:#e8f0f6;
  --brand:#0ea5e9;
  --chip:#1a2332;
  --accent:#4ade80;
  --danger:#ef4444;
}

/* Reset & base */
*{ box-sizing:border-box; }
html, body { height:100%; }
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden; /* prevent horizontal jitter on mobile */
}

/* Header */
.site-header{
  padding:2rem 1rem;
  background:linear-gradient(180deg,#0c1624,transparent);
}
.site-header h1{
  margin:0 0 .25rem 0;
  font-size:1.75rem;
}
.subtitle{
  margin:.25rem 0 0 0;
  color:var(--muted);
}

/* Layout */
.container{
  display:grid;
  grid-template-columns:320px 1fr;
  gap:1rem;
  padding:1rem;
}

/* Filters / controls panel */
.controls{
  background:var(--panel);
  padding:1rem;
  border-radius:12px;
  position:sticky;
  top:1rem;
  height:max-content;
  z-index:10;             /* stay above results on desktop */
  box-shadow:0 0 0 1px #132033; /* ensure opaque coverage */
}

.field{ margin-bottom:1rem; }
.field.inline{
  display:flex;
  gap:.5rem;
  align-items:center;
}

label{
  display:block;
  margin:0 0 .35rem .15rem;
  color:var(--muted);
  font-size:.9rem;
}

input[type=search],
input[type=text],
select{
  width:100%;
  padding:.6rem .7rem;
  border-radius:10px;
  border:1px solid #233044;
  background:#0f1722;
  color:var(--text);
}

select{ min-height:8rem; }

/* Ingredient atoms area */
.atom-mode{
  display:flex;
  gap:1rem;
  margin:.5rem 0;
  color:var(--muted);
}

.chips{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(110px, 1fr));
  gap:.35rem;
  max-height:260px;
  overflow:auto;
  border:1px solid #223047;
  padding:.5rem;
  border-radius:8px;
  background:#0f1722;
}

.chip{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  padding:.35rem .55rem;
  border-radius:999px;
  background:var(--chip);
  border:1px solid #1f2a3a;
  color:var(--text);
  cursor:pointer;
  font-size:.85rem;
}

.chip.selected{
  outline:2px solid var(--brand);
  background:#122338;
}

/* Buttons */
.secondary{
  background:transparent;
  color:var(--text);
  border:1px solid #243247;
  padding:.5rem .8rem;
  border-radius:8px;
  cursor:pointer;
}

/* Results grid & cards */
.results{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(320px, 1fr));
  gap:1rem;
  position:relative; /* create stacking context */
  z-index:1;         /* below .controls on desktop */
}

.card{
  background:var(--panel);
  border:1px solid #132033;
  border-radius:12px;
  padding:1rem;
  display:flex;
  flex-direction:column;
  gap:.5rem;
}

.card-header{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:.5rem;
}

.card-title{
  margin:0;
  font-size:1.1rem;
}

.meta{
  color:var(--muted);
  font-size:.85rem;
}

.tags{
  display:flex;
  flex-wrap:wrap;
  gap:.35rem;
}

.tag{
  background:#102033;
  border:1px solid #1b2a3a;
  color:#b7c7d6;
  padding:.2rem .5rem;
  border-radius:999px;
  font-size:.75rem;
}

.ingredients ul,
.instructions ol{
  margin:.25rem 0 0 1rem;
}

.ingredients h4,
.instructions h4{
  margin:.35rem 0;
  color:#c9d7e4;
}

/* Footer */
.site-footer{
  padding:1rem;
  color:var(--muted);
  font-size:.85rem;
}

/* =========================
   Mobile & small tablet hardening
   ========================= */

/* On small screens we switch to single column and force the filter
   to be non-sticky so results can't scroll underneath it.
   We also reduce the chip panel height and ensure opaque layering. */
@media (max-width: 900px){
  .container{
    grid-template-columns:1fr;
  }

  /* FORCE non-sticky on mobile (use !important to beat cached rules) */
  .controls{
    position:static !important;
    top:auto !important;
    margin-bottom:1rem;
    z-index:auto;               /* no overlap */
    background:var(--panel);    /* solid background */
  }

  /* Results get their own stacking context and a little spacing */
  .results{
    position:relative;
    z-index:0;
    margin-top:0.25rem;
  }

  /* Chip list: fit within viewport without pushing content */
  .chips{
    max-height:45vh;
    overflow:auto;
    -webkit-overflow-scrolling:touch;
  }
}

/* Optional: only enable sticky on wider screens (tablets/desktops).
   This prevents any sticky edge-cases on phones entirely. */
@media (min-width: 901px){
  .controls{ position:sticky; top:1rem; }
}
